"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[874],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),u=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||i;return n?o.createElement(h,a(a({ref:t},p),{},{components:n})):o.createElement(h,a({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var u=2;u<i;u++)a[u]=n[u];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5195:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return c}});var o=n(7462),r=n(3366),i=(n(7294),n(3905)),a=["components"],l={title:"Installing on Windows"},s=void 0,u={unversionedId:"windows-install",id:"windows-install",title:"Installing on Windows",description:"Prerequisites:",source:"@site/docs/windows-install.md",sourceDirName:".",slug:"/windows-install",permalink:"/docs/windows-install",draft:!1,editUrl:"https://github.com/notAperson535/OneClick-macOS-Simple-KVM/tree/docs/docs/windows-install.md",tags:[],version:"current",frontMatter:{title:"Installing on Windows"},sidebar:"docs",previous:{title:"Manual Method",permalink:"/docs/manualmethod"},next:{title:"Installing the VM",permalink:"/docs/category/installing-the-vm"}},p={},c=[{value:"Prerequisites:",id:"prerequisites",level:2},{value:"Step 1 (Installing WSL2)",id:"step-1-installing-wsl2",level:2},{value:"Step 2 (Getting the files)",id:"step-2-getting-the-files",level:2},{value:"Step 3 (installing QEMU and more)",id:"step-3-installing-qemu-and-more",level:2},{value:"You&#39;re done!",id:"youre-done",level:2},{value:"Now head over to installing macOS for instructions on correctly installing macOS",id:"now-head-over-to-installing-macos-for-instructions-on-correctly-installing-macos",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"cat /sys/module/kvm_intel/parameters/nested returns <code>N</code>, but KVM-OK Returns <code>KVM acceleration can be used</code>",id:"cat-sysmodulekvm_intelparametersnested-returns-n-but-kvm-ok-returns-kvm-acceleration-can-be-used",level:3},{value:"Getting <code>Your CPU does not support KVM extensions</code> on AMD processors",id:"getting-your-cpu-does-not-support-kvm-extensions-on-amd-processors",level:3}],d={toc:c};function m(e){var t=e.components,n=(0,r.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Windows 10 or Higher"),(0,i.kt)("li",{parentName:"ul"},"Virtualization capabilities"),(0,i.kt)("li",{parentName:"ul"},"8GB of RAM or more")),(0,i.kt)("h2",{id:"step-1-installing-wsl2"},"Step 1 (Installing WSL2)"),(0,i.kt)("p",null,"Install WSL2. If you have WSL2 already, you can skip this step.\nOpen Powershell as an administrator and run this command"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"wsl --install\n")),(0,i.kt)("p",null,"Once it finishes installing, restart your computer.\nAfter rebooting, you'll need to check if this command automatically installed Ubuntu.\nRun ",(0,i.kt)("inlineCode",{parentName:"p"},"wsl -l -v"),". If that outputs something related to Ubuntu, you are good to go. If not, install Ubuntu with this command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"wsl --install Ubuntu\n")),(0,i.kt)("p",null,"Once that is done, pick a username and password inside the WSL terminal that pops up. It does not have to be the same as the system."),(0,i.kt)("h2",{id:"step-2-getting-the-files"},"Step 2 (Getting the files)"),(0,i.kt)("p",null,"Open a new Ubuntu terminal window, and run this command, replacing the WINDOWS_USER_NAME with your Windows username, not the Linux one."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"cd /mnt/c/users/WINDOWS_USER_NAME/Documents\n")),(0,i.kt)("p",null,"Now clone the repository"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"git clone https://github.com/notAperson535/OneClick-macOS-Simple-KVM.git\n")),(0,i.kt)("p",null,"Now cd into the newly created folder"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"cd OneClick-macOS-Simple-KVM\n")),(0,i.kt)("h2",{id:"step-3-installing-qemu-and-more"},"Step 3 (installing QEMU and more)"),(0,i.kt)("p",null,"First, install the ",(0,i.kt)("inlineCode",{parentName:"p"},"cpu-checker")," package:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"sudo apt install cpu-checker\n")),(0,i.kt)("p",null,"Now run this commands to make sure virtualization works:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"kvm-ok\n")),(0,i.kt)("p",null,"This should output ",(0,i.kt)("inlineCode",{parentName:"p"},"Y"),". If it does not, check your BIOS configuration to make sure nested virtualization is on (search up online based on which CPU you have)."),(0,i.kt)("p",null,"Next, for Intel CPUs run:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"cat /sys/module/kvm_intel/parameters/nested\n")),(0,i.kt)("p",null,"Or for AMD CPUs run:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"cat /sys/module/kvm_amd/parameters/nested\n")),(0,i.kt)("p",null,"If that command returns ",(0,i.kt)("inlineCode",{parentName:"p"},"Y")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"1")," (depending on CPU type), then you are good to go. If it returns something like ",(0,i.kt)("inlineCode",{parentName:"p"},"N"),", then go to the bottom of the page for troubleshooting."),(0,i.kt)("p",null,"Now make sure you are still in the OneClick-macOS-Simple-KVM directory. The path should look something like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"/mnt/c/users/WINDOWS_USER_NAME/Documents/OneClick-macOS-Simple-KVM\n")),(0,i.kt)("p",null,"Before running ",(0,i.kt)("inlineCode",{parentName:"p"},"setup.sh")," and installing macOS, you will need to follow a few steps first to get the best performance out of the VM. First, download VNC Viewer ",(0,i.kt)("a",{parentName:"p",href:"https://www.realvnc.com/en/connect/download/viewer/"},"here"),"."),(0,i.kt)("p",null,"Next run ",(0,i.kt)("inlineCode",{parentName:"p"},"./setup.sh"),"."),(0,i.kt)("p",null,"Once you see a QEMU window pop up, press ctrl+c in the terminal and run ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo HEADLESS=1 ./basic.sh"),'. This will start the VM in "headless" mode, which puts the output of the display onto a local port. Open VNC Viewer, and go to ',(0,i.kt)("inlineCode",{parentName:"p"},"localhost:5900")," to connect to the VM using VNC."),(0,i.kt)("p",null,"Whenever you want to load up the machine again, run ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo HEADLESS=1 ./basic.sh"),", NOT ",(0,i.kt)("inlineCode",{parentName:"p"},"./setup.sh")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"./basic.sh"),"."),(0,i.kt)("h2",{id:"youre-done"},"You're done!"),(0,i.kt)("p",null,"Don't close the terminal when the QEMU window is open, as it will shut down the VM and may cause data loss."),(0,i.kt)("h2",{id:"now-head-over-to-installing-macos-for-instructions-on-correctly-installing-macos"},(0,i.kt)("a",{parentName:"h2",href:"https://notaperson535.github.io/OneClick-macOS-Simple-KVM/docs/installing-macos/"},"Now head over to installing macOS for instructions on correctly installing macOS")),(0,i.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,i.kt)("h3",{id:"cat-sysmodulekvm_intelparametersnested-returns-n-but-kvm-ok-returns-kvm-acceleration-can-be-used"},"cat /sys/module/kvm_intel/parameters/nested returns ",(0,i.kt)("inlineCode",{parentName:"h3"},"N"),", but KVM-OK Returns ",(0,i.kt)("inlineCode",{parentName:"h3"},"KVM acceleration can be used")),(0,i.kt)("p",null,"Edit these commands in .wslconfig, which is located in your Windows user directory, replacing the WINDOWS_USER_NAME with the your Windows username, not the Linux one."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"nestedVirtualization=true\nkernel=C:\\\\Users\\\\WINDOWS_USER_NAME\\\\bzImage\ndebugConsole=true\npageReporting=true\nkernelCommandLine=intel_iommu=on iommu=pt kvm.ignore_msrs=1 kvm-intel.nested=1 kvm-intel.ept=1 kvm-intel.emulate_invalid_guest_state=0 kvm-intel.enable_shadow_vmcs=1 kvm-intel.enable_apicv=1\n")),(0,i.kt)("h3",{id:"getting-your-cpu-does-not-support-kvm-extensions-on-amd-processors"},"Getting ",(0,i.kt)("inlineCode",{parentName:"h3"},"Your CPU does not support KVM extensions")," on AMD processors"),(0,i.kt)("p",null,"For those with AMD EPYC/Ryzen processor or later, Nested Virtualization (required for KVM) ",(0,i.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/user-guide/enable-nested-virtualization#amd-epyc--ryzen-processor-or-later"},"is not supported on Windows 10"),". You will have to upgrade to Windows 11."))}m.isMDXComponent=!0}}]);